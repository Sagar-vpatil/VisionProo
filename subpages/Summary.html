<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ophthalmology Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
          /* Side Navbar Styles */
  .side-navbar {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 250px;
    background-color: #343a40;
    color: #fff;
    padding-top: 20px;
    transition: all 0.3s;
  }
  
  .side-navbar.active-nav {
    left: -250px;
  }
  
  .side-navbar .nav-item {
    margin-bottom: 15px;
  }
  
  .side-navbar .nav-link {
    color: #fff;
    text-decoration: none;
  }
  
  .side-navbar .nav-link:hover {
    color: #ff6700;
  }
  
  /* New Appointment Button */
  .side-navbar .btn {
    background-color: #ff6700;
    color: white;
    border: none;
    transition: background-color 0.3s ease;
  }
  
  .side-navbar .btn:hover {
    background-color: #e05b00;
  }
  
  /* Search Bar */
  #search-bar {
    padding: 10px;
    border-radius: 4px;
    border: 1px solid #ddd;
    width:200px;
    margin-left: 14px;
  }
  
  /* Main Content Styles */
  .my-container {
    margin-left: 250px;
    transition: all 0.3s;
    padding: 20px;
  }
  
  .my-container.active-cont {
    margin-left: 0;
  }
  
  .top-navbar {
    display: flex;
    justify-content: flex-start;
    align-items: center;
  }
  
  .top-navbar .btn {
    font-size: 30px;
    background: none;
    border: none;
    color: #000;
  }
  
  h3, p {
    color: #333;
  }
  /* Top Navbar Styling */
  .top-navbar {
      height: 60px;
      background-color: #f8f9fa;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      padding: 0 20px;
  }
  
  /* Button Styles */
  #add-patient-btn {
      background-color: #007bff;
      color: #fff;
      border: none;
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 5px;
      transition: background-color 0.3s;
  }
  
  #add-patient-btn:hover {
      background-color: #0056b3;
  }
  
  #add-bill-btn {
      background-color: #6c757d;
      color: #fff;
      border: none;
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 5px;
      transition: background-color 0.3s;
  }
  
  #add-bill-btn:hover {
      background-color: #545b62;
  }
  
  #add-receptionist-btn {
      background-color: #28a745;
      color: #fff;
      border: none;
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 5px;
      transition: background-color 0.3s;
  }
  
  #add-receptionist-btn:hover {
      background-color: #218838;
  }
  
  
        body {
            background-color: #eef2f3;
        }
        .table th, .table td {
            text-align: center;
        }
        .card-header {
            font-weight: bold;
        }
        .bg-primary {
            background-color: #004aad !important;
        }
        .bg-success {
            background-color: #28a745 !important;
        }
        .highlight-red {
            color: red;
            font-weight: bold;
        }
        .container {
            width: 100%;
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        .flex-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }
        .flex-container .table-container {
            flex: 1;
            min-width: 300px;
        }
        .table-dark {
            background-color: #343a40 !important;
            color: white;
        }
        #backButton {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 10px 15px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 5px;
  display: flex;
  align-items: center;
}

#backButton i {
  margin-right: 5px;
}

#backButton:hover {
  background-color: #0056b3;
}

    </style>
</head>
<body>

    <!-- Side-Nav -->
<div class="side-navbar active-nav d-flex justify-content-between flex-wrap flex-column" id="sidebar">
   
    
  <hr>
      <!-- Search Bar -->
      <!-- <li class="nav-item my-3 w-90">
        <input type="text" class="form-control" id="search-bar" placeholder="Search Patient..." />
      </li> -->

  
  
  
      <!-- Add New Appointment Button -->
      <!-- <li class="nav-item mt-auto">
        <a href="./appointement.html" class="nav-link text-white w-80 text-left">
          <button class="btn btn-primary">New Appointment</button>
        </a>
      </li> -->
    </ul>
  </div>
  
  <!-- Main Wrapper -->
  <div class="p-1 my-container active-cont">
    <!-- Top Nav -->
    <nav class="navbar top-navbar navbar-light bg-light px-5 d-flex justify-content-between align-items-center">
      <!-- Menu Button -->
      <div class="d-flex align-items-center">
        <a class="btn border-0" id="menu-btn"><i class="bx bx-menu" style="background-color: #fff;"></i></a>
      
      </div>
  
      <!-- Action Buttons -->
      <div class="d-flex align-items-center gap-3">
        
       
     
       
  
           <!-- <h2><b style="display: inline-flex; text-align: center; justify-content: center;">रविकल्प हॉस्पिटल</b> </h2> -->
         
   
       
  
  
  
        <!-- Bill Button -->
        
        <!-- Add Receptionist Button -->
        <button id="backButton" onclick="window.location.href='./main.html';">
            <i class="fa fa-arrow-left"></i> Back
          </button>
          
  
  
      </div>
    </nav>
  
    <div class="container">
        <h2 class="text-center mb-4 text-primary">Patient Summary</h2>
        
        <div class="card mb-3">
            <div class="card-header bg-primary text-white">Patient Information</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6"><strong>Name:</strong> <span id="patient-name"></span></div>
                    <div class="col-md-6"><strong>Age:</strong> <span id="patient-age"></span> </div>
                </div>
                <div class="row">
                    <div class="col-md-6"><strong>Contact:</strong> <span id="patient-mobile"></span></div>
                    <div class="col-md-6"><strong>Gender:</strong> <span id="patient-gender"></span></div>
                </div>
                <div class="row">
                    <div class="col-md-6"><strong>History Date:</strong> <span id="history-date"></span></div>
                    <div class="col-md-6"><strong>Address:</strong> <span id="patient-address"></span></div>
                </div>
            </div>
        </div>

        <div class="card mb-3" id="Symptoms-History-Section">
            <div class="card-header bg-success text-white">Symptoms / History</div>
            <div class="card-body">
                <p class="show-symptoms"><strong>Symptoms:</strong> <span class="highlight-red">Blurred Vision, Eye Pain</span></p>
                <p class="show-medical-history"><strong>Medical History:</strong> <span class="highlight-red">Glaucoma</span></p>
                <p class="show-surgical-history"><strong>Surgical History:</strong> <span class="highlight-red">Prescription Eye Drops</span></p>
            </div>
        </div>
        <h2 class="text-center mb-4 text-primary" id="Ophthal-Heading">Ophthal</h2>
        <div class="flex-container">
            <div class="table-container" id="Visual-Acuity-Section">
                
                <h5 id="Visual-Acuity-Heading">Visual Acuity:</h5>
                <table class="table table-bordered" id="Visual-Acuity-Table">
                    <thead class="table-dark">
                        <tr>
                            <th></th>
                            <th>Right Eye</th>
                            <th>Left Eye</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Unaided</td>
                            <td id="UnaidedR">0</td>
                            <td id="UnaidedL">0</td>
                        </tr>
                        <tr>
                            <td>Glasses</td>
                            <td id="GlassesR">0</td>
                            <td id="GlassesL">0</td>
                        </tr>
                        <tr>
                            <td>Near Vision</td>
                            <td id="NearVisionR">1</td>
                            <td id="NearVisionL">0</td>
                        </tr>
                        <tr>
                            <td>Pinhole Vision</td>
                            <td id="PinholeR">1</td>
                            <td id="PinholeL">0</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="table-container"  id="Current-Power-Section">
                <h5>Current Power Glasses:</h5>
                <table class="table table-bordered" id="Current-Power-Table">
                    <thead  class="table-dark">
                        <tr>
                            <th></th>
                            <th colspan="4">Right Eye</th>
                            <th colspan="4">Left Eye</th>
                        </tr>
                    </thead>
                    <thead>
                        <tr>
                            <th></th>
                            <th>SPH</th>
                            <th>CYL</th>
                            <th>Axis</th>
                            <th>V/A</th>
                            <th>SPH</th>
                            <th>CYL</th>
                            <th>Axis</th>
                            <th>V/A</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>DV</td>
                            <td id="DVSPH">+1.25</td>
                            <td id="DVCYL">-0.50</td>
                            <td id="DVAxis">90</td>
                            <td id="DVVA">6/6</td>
                            <td id="DVSPH2">+1.00</td>
                            <td id="DVCYL2">-0.75</td>
                            <td id="DVAxis2">80</td>
                            <td id="DVVA2">6/9</td>
                          </tr>
                          <tr>
                            <td>NV</td>
                            <td id="NVSPH">+2.00</td>
                            <td id="NVCYL">-1.00</td>
                            <td id="NVAxis">85</td>
                            <td id="NVVA">6/7.5</td>
                            <td id="NVSPH2">+1.75</td>
                            <td id="NVCYL2">-0.25</td>
                            <td id="NVAxis2">95</td>
                            <td id="NVVA2" >6/6</td>
                          </tr>
                    </tbody>
                </table>
            </div>



            


        </div>
        
        <div class="flex-container">
            <div class="table-container" id="Refraction-Section">
                <h5>Refraction:</h5>
                <table class="table table-bordered" id="Refraction-Table">
                    <thead  class="table-dark">
                        <tr>
                            <th rowspan="2"></th>
                            <th colspan="4">Right Eye</th>
                            <th colspan="4">Left Eye</th>
                        </tr>
                        <tr>
                            <th>SPH</th>
                            <th>CYL</th>
                            <th>Axis</th>
                            <th>V/A</th>
                            <th>SPH</th>
                            <th>CYL</th>
                            <th>Axis</th>
                            <th>V/A</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Distance</td>
                            <td id="DistanceSPH">85</td>
                            <td id="DistanceCYL">7</td>
                            <td id="DistanceAxis">56</td>
                            <td id="DistanceVA">56</td>
                            <td id="DistanceSPH2">89</td>
                            <td id="DistanceCYL2">56</td>
                            <td id="DistanceAxis2">565</td>
                            <td id="DistanceVA2">8</td>
                          </tr>
                          <tr>
                            <td>Near</td>
                            <td id="NearSPH">8</td>
                            <td id="NearCYL">5</td>
                            <td id="NearAxis">5</td>
                            <td id="NearVA">9</td>
                            <td id="NearSPH2">96</td>
                            <td id="NearCYL2">5</td>
                            <td id="NearAxis2">23</td>
                            <td id="NearVA2">2</td>
                          </tr>
                          <tr>
                            <td>IPD (mm)</td>
                            <td id="REIPD" colspan="4"></td>
                            <td id="LEIPD" colspan="4"></td>
                          </tr>
                          <tr>
                            <td>Type of Glass</td>
                            <td id="RETypeOfGlass" colspan="4"></td>
                            <td id="LETypeOfGlass" colspan="4"></td>
                          </tr>
                          <tr>
                            <td>Remark</td>
                            <td id="RERemark" colspan="4"></td>
                            <td id="LERemark" colspan="4"></td>
                          </tr>
                    </tbody>
                </table>
            </div>
            


            <div class="table-container" id="AR-Section"> 
                <h5>AR:</h5>
               <table  class="table table-bordered" style="width: 590px; ;" border="1" id="AR-Table">
        <thead class="table-dark">
            <tr>
                <th colspan="5">Right Eye</th>
                <th colspan="5">Left Eye</th>
            </tr>
            <tr>
                <th>SPH</th>
                <th>CYL</th>
                <th>Axis</th>
                <th>V/A</th>
                <th>DV</th>
                <th>SPH</th>
                <th>CYL</th>
                <th>Axis</th>
                <th>V/A</th>
                <th>DV</th>
            </tr>
        </thead>
        <tbody>
            <tr style="height: 40px;">
                <td id="ARSPH"></td>
                <td id="ARCYL"></td>
                <td id="ARAxis"></td>
                <td id="ARVA"></td>
                <td id="ARDV"></td>
                <td id="ARSPH2"></td>
                <td id="ARCYL2"></td>
                <td id="ARAxis2"></td>
                <td id="ARVA2"></td>
                <td id="ARDV2"></td>
              </tr>
              <tr>
                <th colspan="2">IPD </th>
                <td colspan="8" id="ARIPD"></td>
              </tr>
        </tbody>
    </table>
                    </div>

        </div>


















        <div class="flex-container">
            <div class="table-container" id="Topography-Section">
                <h5 >Topography</h5>
                <table border="1"  class="table table-bordered" style="width: 580px;" id="Topography-Table">
                    <thead class="table-dark">
                        <tr>
                            <th></th>
                            <th colspan="2">Right Eye</th>
                            <th colspan="2">Left Eye</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>IOP</td>
                            <td id="RightIOP" style="width: 100px;"></td>
                            <td class="unit">mmHg</td>
                            <td id="LeftIOP"></td>
                            <td class="unit" style="width: 50px;">mmHg</td>
                        </tr>
                        <tr>
                            <td>Pachymetry</td>
                            <td id="RightPachymetry" style="width: 100px;"></td>
                            <td class="unit">µm</td>
                            <td id="LeftPachymetry" style="width: 100px;"></td>
                            <td class="unit">µm</td>
                        </tr>
                        <tr>
                            <td>Steepest K</td>
                            <td id="RightSteepest"></td>
                            <td></td>
                            <td id="LeftSteepest"></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Flattest K</td>
                            <td id="RightFlattest"></td>
                            <td></td>
                            <td id="LeftFlattest"></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Av.K</td>
                            <td id="RightAv"></td>
                            <td></td>
                            <td id="LeftAv"></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Cly Power</td>
                            <td id="RightClyPower"></td>
                            <td></td>
                            <td id="LeftClyPower"></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Degree</td>
                            <td id="RightDegree"></td>
                            <td></td>
                            <td id="LeftDegree"></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>KSI/KCI</td>
                            <td id="RightKSIKCI"></td>
                            <td></td>
                            <td id="LeftKSIKCI"></td>
                            <td></td>
                          </tr>
                          <tr>
                            <td>Schirmer Test</td>
                            <td id="RightSchirmerTest"></td>
                            <td></td>
                            <td id="LeftSchirmerTest"></td>
                            <td></td>
                          </tr>
                    </tbody>
                </table>
               
            </div>
            


            <div class="table-container" id="Eye-Examination-Section"> 
                <h5>Eye Examination:</h5>
                <table class="table table-bordered" style="width: 560px;" id="Eye-Examination-Table">
                <thead class="table-dark">
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">Right Eye</th>
                        <th scope="col">Left Eye</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Eyelids & Adnexa</td>
                        <td id="EyelidsR"></td>
                        <td id="EyelidsL"></td>
                    </tr>
                    <tr>
                        <td>Conjunctiva</td>
                        <td id="ConjunctivaR"></td>
                        <td id="ConjunctivaL"></td>
                    </tr>
                    <tr>
                        <td>Sclera</td>
                        <td id="ScleraR"></td>
                        <td id="ScleraL"></td>
                    </tr>
                    <tr>
                        <td>Cornea</td>
                        <td id="CorneaR"></td>
                        <td id="CorneaL"></td>
                    </tr>
                    <tr>
                        <td>Anterior Chamber</td>
                        <td id="AnteriorR"></td>
                        <td id="AnteriorL"></td>
                    </tr>
                    <tr>
                        <td>Iris</td>
                        <td id="IrisR"></td>
                        <td id="IrisL"></td>
                    </tr>
                    <tr>
                        <td>Pupil</td>
                        <td id="PupilR"></td>
                        <td id="PupilL"></td>
                    </tr>
                    <tr>
                        <td>Lens</td>
                        <td id="LensR"></td>
                        <td id="LensL"></td>
                    </tr>
                    <tr>
                        <td>Fundus</td>
                        <td id="FundusR"></td>
                        <td id="FundusL"></td>
                    </tr>
                </tbody>
            </table>
                    </div>

        </div>





        <div class="card mb-3" id="Pre-Operative-Workup-Section">
            <div class="card-header bg-success text-white">Pre-Operative Workup Investigations</div>
            <div class="card-body" id="Pre-Operative-detail-Section">
                <p class="show-BP"><strong>BP =</strong> <span class="highlight-red">Blurred Vision, Eye Pain</span></p>
                <p class="show-SAC"><strong>SAC =</strong> <span class="highlight-red">Glaucoma</span></p>
                <p class="show-Pulse-Rate"> <strong> P =</strong> <span class="highlight-red">Prescription Eye Drops</span></p>
                <p class="show-NCT"><strong>NCT =</strong> <span class="highlight-red">Glaucoma</span></p>
            </div>




            <div class="flex-container">
                <div class="table-container" id="A-Scan-Section">
                    <h5 style="margin-left: 15px;" >A-Scan</h5>
                    <table class="table table-bordered" style="margin-left: 10px;" id="A-Scan-Table">
                        <thead class="table-dark">
                          <tr>
                            <th></th>
                            <th>Right Eye</th>
                            <th>Left Eye</th>
                          </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>K1</td>
                                <td id="RightK1"><span>Data</span></td>
                                <td id="LeftK1"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>K2</td>
                                <td id="RightK2"><span>Data</span></td>
                                <td id="LeftK2"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>LT</td>
                                <td id="RightLT"><span>Data</span></td>
                                <td id="LeftLT"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>AL</td>
                                <td id="RightAL"><span>Data</span></td>
                                <td id="LeftAL"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>ACD</td>
                                <td id="RightACD"><span>Data</span></td>
                                <td id="LeftACD"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>L.Power</td>
                                <td id="RightLPower"><span>Data</span></td>
                                <td id="LeftLPower"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>A.Constant</td>
                                <td id="RightAConstant"><span>Data</span></td>
                                <td id="LeftAConstant"><span>Data</span></td>
                              </tr>
                              <tr>
                                <td>IOL</td>
                                <td id="RightIOL"><span>Data</span></td>
                                <td id="LeftIOL"><span>Data</span></td>
                              </tr>
                        </tbody>
                      </table>
                </div>
                
    
    
                <div class="table-container" id="Pre-Operative-Section">
                    <h5 >IOP/GAT</h5>
                     <table class="table table-bordered" style="width: 620px; height: 70px;" id="Pre-Operative-Table">
                    <thead class="table-dark">
                      <tr>
                        <th colspan="2">Right Eye</th>
                        <th colspan="2">Left Eye</th>
                      </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                              <span id="RightmmHg">Data</span>
                              <span>mmHg</span>
                            </td>
                            <td><span id="RightmmHgTime">00:00</span></td>
                            <td>
                              <span id="LeftmmHg">Data</span>
                              <span>mmHg</span>
                            </td>
                            <td><span id="LeftmmHgTime">00:00</span></td>
                          </tr>
                    </tbody>
                  </table>
                        </div>
    
            </div>
    
        </div>






        <div class="card mb-3" id="Diagnosis-Treatment-Section">
            <div class="card-header bg-success text-white">Diagnosis / Treatment /Investigation</div>
            <div class="card-body">
                <p class="show-diagnosis"><strong>Diagnosis:</strong> <span class="highlight-red">Blurred Vision, Eye Pain</span></p>
                <p class="show-treatment"><strong>Treatment:</strong> <span class="highlight-red">Glaucoma</span></p>
                <p class="show-investigation"><strong>Investigation:</strong> <span class="highlight-red">Prescription Eye Drops</span></p>
            </div>
        </div>
 


        
        <h2 id="Medicines-Heading" class="text-center mb-4 text-primary">Medicines Prescribed</h2>
        <table  class="table table-bordered" style="width: 800px; margin-left: 200px;" id="Medicines-Table">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Medicine Name</th>
                    <th scope="col">Type</th>
                    <th scope="col">Dose</th>
                </tr>
            </thead>
            <tbody id="medicines-tbody">
               <!-- Medicines will be dynamically inserted here -->          
            </tbody>
        </table>




        <div class="card mb-3" id="Advice-Section">
            <div class="card-header bg-success text-white">Advice / img</div>
            <div class="card-body">
                <p class="show-advice"><strong>Advice:</strong> <span class="highlight-red">Blurred Vision, Eye Pain</span></p>
                <!-- <p><strong>img:</strong> <span class="highlight-red">Glaucoma</span></p> -->
              
            </div>
        </div>
















    </div>
    

    <script>
        var menu_btn = document.querySelector("#menu-btn");
        var sidebar = document.querySelector("#sidebar");
        var container = document.querySelector(".my-container");
        menu_btn.addEventListener("click", () => {
          sidebar.classList.toggle("active-nav");
          container.classList.toggle("active-cont");
        });
    
      </script>
      <script>
         const appointment = JSON.parse(window.localStorage.getItem("appointment"));
        
         const historyDate = localStorage.getItem("tempDate");
         if(appointment) {
            document.getElementById("patient-name").textContent = appointment.Name || "N/A";
            document.getElementById("patient-age").textContent = appointment.Age ? appointment.Age + " yrs" : "N/A";
            document.getElementById("patient-mobile").textContent = appointment.MobileNo || "N/A";
            document.getElementById("patient-gender").textContent = appointment.Gender || "N/A";
            document.getElementById("patient-address").textContent = appointment.Address || "N/A";
            document.getElementById("history-date").textContent = historyDate || "N/A";
         }

          // Load the selected symptoms from local storage
       const selectedSymptoms = JSON.parse(localStorage.getItem("selectedSymptoms")) || [];

       const complaintsSection = document.querySelector(".show-symptoms");
       if (selectedSymptoms.length === 0) {
       // Hide the complaints section if no symptoms are selected
       complaintsSection.style.display = "none";
       } else {
       // Show the complaints section and update the content
       complaintsSection.style.display = "block";
       complaintsSection.innerHTML = `
           <strong>Symptoms:</strong>
           <span class="highlight-red">${selectedSymptoms.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>
       `;
       }

        // Load the selected medicalHistory from local storage
       const selectedMedicalHistory = JSON.parse(localStorage.getItem("selectedMedicalHistory")) || [];
       const medicalHistorySection = document.querySelector(".show-medical-history");

       if (selectedMedicalHistory.length === 0) {
          // Hide the medical history section if no history is selected
          medicalHistorySection.style.display = "none";
        } else {
          // Show the medical history section and update the content
          medicalHistorySection.style.display = "block";
          medicalHistorySection.innerHTML = `
                <strong>Medical History:</strong>
                <span class="highlight-red">${selectedMedicalHistory.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>
          `;
        }


        // Load the selected surgicalHistory from local storage
        const selectedSurgicalHistory = JSON.parse(localStorage.getItem("selectedSurgicalHistory")) || [];
        const surgicalHistorySection = document.querySelector(".show-surgical-history");

        if (selectedSurgicalHistory.length === 0) {
            // Hide the surgical history section if no history is selected
            surgicalHistorySection.style.display = "none";
        } else {
            // Show the surgical history section and update the content
            surgicalHistorySection.style.display = "block";
            surgicalHistorySection.innerHTML = `
                <strong>Surgical History:</strong>
                <span class="highlight-red">${selectedSurgicalHistory.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>
            `;
        }

        if(selectedSymptoms.length === 0 && selectedMedicalHistory.length === 0 && selectedSurgicalHistory.length === 0) {
            document.getElementById("Symptoms-History-Section").style.display = "none";
        }

        // Load the vision table from local storage

       const visionTable = JSON.parse(localStorage.getItem("visionTable")) || {};

        const table = document.getElementById("Visual-Acuity-Table");
        const heading = document.getElementById("Visual-Acuity-Heading");
        const visionTableSection = document.getElementById("Visual-Acuity-Section");
        const rows = table.querySelectorAll("tbody tr");

        // Define the mapping for each row and its respective keys in visionTable
        const rowMapping = [
            { rowIndex: 0, rightKey: "UnaidedR", leftKey: "UnaidedL" },
            { rowIndex: 1, rightKey: "GlassesR", leftKey: "GlassesL" },
            { rowIndex: 2, rightKey: "NearVisionR", leftKey: "NearVisionL" },
            { rowIndex: 3, rightKey: "PinholeR", leftKey: "PinholeL" },
        ];

        let visibleRowCount = 0;

        rowMapping.forEach(({ rowIndex, rightKey, leftKey }) => {
            const rightValue = visionTable[rightKey] || "";
            const leftValue = visionTable[leftKey] || "";

            // Hide the row if both values are empty
            if (rightValue === "" && leftValue === "") {
            rows[rowIndex].style.display = "none";
            } else {
            rows[rowIndex].style.display = ""; // Ensure it's visible if not empty
            rows[rowIndex].querySelector(`#${rightKey}`).textContent = rightValue || "0";
            rows[rowIndex].querySelector(`#${leftKey}`).textContent = leftValue || "0";
            visibleRowCount++;
            }
        });

        // Show or hide the entire table if all rows are hidden
        table.style.display = visibleRowCount > 0 ? "table" : "none";

        // Show or hide the heading based on whether the table is visible
        heading.style.display = visibleRowCount > 0 ? "block" : "none";

        // Show or hide the entire section if the table is hidden
        visionTableSection.style.display = visibleRowCount > 0 ? "block" : "none";


        // Load the current power table from local storage

        const currentPowerGlasses = JSON.parse(localStorage.getItem("currentPowerGlasses")) || {};

        const currentPowerSection = document.getElementById("Current-Power-Section");
        console.log(currentPowerGlasses);
        // Check if all values in currentPowerGlasses are empty
        const allEmpty = Object.values(currentPowerGlasses).every(value => value === "");
        if (allEmpty) {
            // Hide the entire section if all values are empty
            currentPowerSection.style.display = "none";
        } else {
            // Show the section and update the table
            currentPowerSection.style.display = "block";
            // Update each cell in the table with the corresponding value
            Object.entries(currentPowerGlasses).forEach(([key, value]) => {
            const cell = currentPowerSection.querySelector(`#${key}`);
            cell.textContent = value || "";
            });
        }


        // Load refraction table data from local storage
        const refractionTable = JSON.parse(localStorage.getItem("refractionTable")) || {};

        // Get the Refraction Table section and heading
        const refractionSection = document.getElementById("Refraction-Table");
        const refractionHeading = document.getElementById("Refraction-Section");

        console.log(refractionTable);

        // Check if all values in refractionTable are empty
        const allEmptyRefraction = Object.values(refractionTable).every(value => value === "");
        if (allEmptyRefraction) {
            // Hide the entire section if all values are empty
            refractionSection.style.display = "none";
            refractionHeading.style.display = "none";
        } else {
            // Show the section and update the table
            refractionSection.style.display = "table";
            refractionHeading.style.display = "block";

            // Update each cell in the table with the corresponding value
            Object.entries(refractionTable).forEach(([key, value]) => {
                const cell = document.getElementById(key);
                if (cell) {
                    cell.textContent = value || "-"; // Default to "-" if value is empty
                }
            });
        }


        // Load AR table data from local storage
        const arTable = JSON.parse(localStorage.getItem("arTable")) || {};

        // Get AR table and heading elements
        const arTableElement = document.getElementById("AR-Table");
        const arHeading = document.getElementById("AR-Section");

        // Get all rows in the AR table body
        const arRows = arTableElement.querySelectorAll("tbody tr");

        // Define row mappings
        const arRowMappings = [
            { rowIndex: 0, keys: ["ARSPH", "ARCYL", "ARAxis", "ARVA", "ARDV", "ARSPH2", "ARCYL2", "ARAxis2", "ARVA2", "ARDV2"] },
            { rowIndex: 1, keys: ["ARIPD"] } // Second row for IPD
        ];

        let visibleARRowCount = 0;

        // Iterate through each row mapping and update table cells
        arRowMappings.forEach(({ rowIndex, keys }) => {
            let isRowEmpty = true; // Assume the row is empty initially

            keys.forEach(key => {
                const cell = document.getElementById(key);
                const value = arTable[key]?.trim() || ""; // Trim to handle whitespace

                if (cell) {
                    cell.textContent = value || "-"; // Set value, default to "N/A"

                    // Check if at least one value is not empty
                    if (value) {
                        isRowEmpty = false;
                    }
                }
            });

            // Hide row if all values are empty
            if (isRowEmpty) {
                arRows[rowIndex].style.display = "none";
            } else {
                arRows[rowIndex].style.display = ""; // Ensure it's visible if not empty
                visibleARRowCount++;
            }
        });

        // Show or hide the entire table based on row visibility
        arTableElement.style.display = visibleARRowCount > 0 ? "table" : "none";
        arHeading.style.display = visibleARRowCount > 0 ? "block" : "none";

       
        // Load the topography table from local storage
        const topographyTable = JSON.parse(localStorage.getItem("topographyTable")) || {};

        // Get table and heading elements
        const topographyTableElement = document.getElementById("Topography-Table");
        const topographyHeading = document.getElementById("Topography-Section");
        const topographyRows = topographyTableElement.querySelectorAll("tbody tr");

        // Define the mapping for each row and its respective keys in topographyTable
        const topographyRowMapping = [
            { rowIndex: 0, rightKey: "RightIOP", leftKey: "LeftIOP" },
            { rowIndex: 1, rightKey: "RightPachymetry", leftKey: "LeftPachymetry" },
            { rowIndex: 2, rightKey: "RightSteepest", leftKey: "LeftSteepest" },
            { rowIndex: 3, rightKey: "RightFlattest", leftKey: "LeftFlattest" },
            { rowIndex: 4, rightKey: "RightAv", leftKey: "LeftAv" },
            { rowIndex: 5, rightKey: "RightClyPower", leftKey: "LeftClyPower" },
            { rowIndex: 6, rightKey: "RightDegree", leftKey: "LeftDegree" },
            { rowIndex: 7, rightKey: "RightKSIKCI", leftKey: "LeftKSIKCI" },
            { rowIndex: 8, rightKey: "RightSchirmerTest", leftKey: "LeftSchirmerTest" }
        ];

        let visibleTopographyRowCount = 0;

        topographyRowMapping.forEach(({ rowIndex, rightKey, leftKey }) => {
            const rightValue = topographyTable[rightKey] || "";
            const leftValue = topographyTable[leftKey] || "";

            // Hide the row if both values are empty
            if (rightValue === "" && leftValue === "") {
                topographyRows[rowIndex].style.display = "none";
            } else {
                topographyRows[rowIndex].style.display = ""; // Ensure it's visible if not empty
                topographyRows[rowIndex].querySelector(`#${rightKey}`).textContent = rightValue || "-";
                topographyRows[rowIndex].querySelector(`#${leftKey}`).textContent = leftValue || "-";
                visibleTopographyRowCount++;
            }
        });

        // Show or hide the entire table if all rows are hidden
        topographyTableElement.style.display = visibleTopographyRowCount > 0 ? "table" : "none";

        // Show or hide the heading based on whether the table is visible
        topographyHeading.style.display = visibleTopographyRowCount > 0 ? "block" : "none";
       

          // Load the eye examination table from local storage
        const eyeExaminationTable = JSON.parse(localStorage.getItem("eyeExaminationTable")) || {};

        // Get table and heading elements
        const eyeTable = document.getElementById("Eye-Examination-Table");
        const eyeHeading = document.getElementById("Eye-Examination-Section");
        const eyeRows = eyeTable.querySelectorAll("tbody tr");

        // Define the mapping for each row and its respective keys in eyeExaminationTable
        const eyeRowMapping = [
            { rowIndex: 0, rightKey: "EyelidsR", leftKey: "EyelidsL" },
            { rowIndex: 1, rightKey: "ConjunctivaR", leftKey: "ConjunctivaL" },
            { rowIndex: 2, rightKey: "ScleraR", leftKey: "ScleraL" },
            { rowIndex: 3, rightKey: "CorneaR", leftKey: "CorneaL" },
            { rowIndex: 4, rightKey: "AnteriorR", leftKey: "AnteriorL" },
            { rowIndex: 5, rightKey: "IrisR", leftKey: "IrisL" },
            { rowIndex: 6, rightKey: "PupilR", leftKey: "PupilL" },
            { rowIndex: 7, rightKey: "LensR", leftKey: "LensL" },
            { rowIndex: 8, rightKey: "FundusR", leftKey: "FundusL" }
        ];

        let visibleEyeRowCount = 0;

        eyeRowMapping.forEach(({ rowIndex, rightKey, leftKey }) => {
            const rightValue = eyeExaminationTable[rightKey] || "";
            const leftValue = eyeExaminationTable[leftKey] || "";

            // Hide the row if both values are empty
            if (rightValue === "" && leftValue === "") {
                eyeRows[rowIndex].style.display = "none";
            } else {
                eyeRows[rowIndex].style.display = ""; // Ensure it's visible if not empty
                eyeRows[rowIndex].querySelector(`#${rightKey}`).textContent = rightValue || "N/A";
                eyeRows[rowIndex].querySelector(`#${leftKey}`).textContent = leftValue || "N/A";
                visibleEyeRowCount++;
            }
        });

        // Show or hide the entire table if all rows are hidden
        eyeTable.style.display = visibleEyeRowCount > 0 ? "table" : "none";

        // Show or hide the heading based on whether the table is visible
        eyeHeading.style.display = visibleEyeRowCount > 0 ? "block" : "none";

        // Hide Optahl heading if all tables are hidden
        if(visibleRowCount === 0 && visibleEyeRowCount === 0 && visibleTopographyRowCount === 0 && allEmpty && allEmptyRefraction && visibleARRowCount === 0) {
            document.getElementById("Ophthal-Heading").style.display = "none";
        }

        
        // Load PreOperativeDetails data from local storage
        const preOperativeDetails = JSON.parse(localStorage.getItem("PreOperativeDetails")) || {};

        // Define field mappings
        const fieldMappings = [
            { key: "BPResult", className: "show-BP", label: "BP" },
            { key: "PulseRate", className: "show-Pulse-Rate", label: "P" },
            { key: "SACResult", className: "show-SAC", label: "SAC" },
            { key: "NCTResult", className: "show-NCT", label: "NCT" }
        ];

        let visibleCount = 0;

        // Iterate through each field and update the content
        fieldMappings.forEach(({ key, className, label }) => {
            const element = document.querySelector(`.${className}`);

            if (element) {
                const value = preOperativeDetails[key]?.trim() || ""; // Trim to remove whitespace

                if (value) {
                    element.innerHTML = `<strong>${label} =</strong> <span class="highlight-red">${value}</span>`;
                    visibleCount++;
                } else {
                    element.style.display = "none"; // Hide element if value is empty
                }
            }
        });

        // Hide the entire section if no details are available
        const patientDetailsSection = document.querySelector(".Pre-Operative-detail-Section");
        if (visibleCount === 0 && patientDetailsSection) {
            patientDetailsSection.style.display = "none";
        }


        // Load the A-Scan table from local storage like eye examination table
        const aScanTable = JSON.parse(localStorage.getItem("aScanTable")) || {};
        
        // Get table and heading elements
        const aScanTableElement = document.getElementById("A-Scan-Table");
        const aScanHeading = document.getElementById("A-Scan-Section");
        const aScanRows = aScanTableElement.querySelectorAll("tbody tr");

        // Define the mapping for each row and its respective keys in aScanTable
        const aScanRowMapping = [
            { rowIndex: 0, rightKey: "RightK1", leftKey: "LeftK1" },
            { rowIndex: 1, rightKey: "RightK2", leftKey: "LeftK2" },
            { rowIndex: 2, rightKey: "RightLT", leftKey: "LeftLT" },
            { rowIndex: 3, rightKey: "RightAL", leftKey: "LeftAL" },
            { rowIndex: 4, rightKey: "RightACD", leftKey: "LeftACD" },
            { rowIndex: 5, rightKey: "RightLPower", leftKey: "LeftLPower" },
            { rowIndex: 6, rightKey: "RightAConstant", leftKey: "LeftAConstant" },
            { rowIndex: 7, rightKey: "RightIOL", leftKey: "LeftIOL" }
        ];

        let visibleAScanRowCount = 0;

        aScanRowMapping.forEach(({ rowIndex, rightKey, leftKey }) => {
            const rightValue = aScanTable[rightKey] || "";
            const leftValue = aScanTable[leftKey] || "";

            // Hide the row if both values are empty
            if (rightValue === "" && leftValue === "") {
                aScanRows[rowIndex].style.display = "none";
            } else {
                aScanRows[rowIndex].style.display = ""; // Ensure it's visible if not empty
                aScanRows[rowIndex].querySelector(`#${rightKey}`).textContent = rightValue || "-";
                aScanRows[rowIndex].querySelector(`#${leftKey}`).textContent = leftValue || "-";
                visibleAScanRowCount++;
            }
        });


        // Show or hide the entire table if all rows are hidden
        aScanTableElement.style.display = visibleAScanRowCount > 0 ? "table" : "none";

        // Show or hide the heading based on whether the table is visible
        aScanHeading.style.display = visibleAScanRowCount > 0 ? "block" : "none";



        // Load IOP/GAT data from local storage like eye examination table
        const iopGatTable = JSON.parse(localStorage.getItem("iopGatTable")) || {};

        // Get table and heading elements
        const iopGatTableElement = document.getElementById("Pre-Operative-Table");
        const iopGatHeading = document.getElementById("Pre-Operative-Section");

        // Get all rows in the IOP/GAT table body
        const iopGatRows = iopGatTableElement.querySelectorAll("tbody tr");

        // Define row mappings
        const iopGatRowMappings = [
            { rowIndex: 0, rightKey: "RightmmHg", rightTimeKey: "RightmmHgTime", leftKey: "LeftmmHg", leftTimeKey: "LeftmmHgTime" }
        ];

        let visibleIopGatRowCount = 0;

        // Iterate through each row mapping and update table cells

        iopGatRowMappings.forEach(({ rowIndex, rightKey, rightTimeKey, leftKey, leftTimeKey }) => {
            const rightValue = iopGatTable[rightKey] || "";
            const rightTimeValue = iopGatTable[rightTimeKey] || "";
            const leftValue = iopGatTable[leftKey] || "";
            const leftTimeValue = iopGatTable[leftTimeKey] || "";

            // Hide the row if both values are empty
            if (rightValue === "" && leftValue === "") {
                iopGatRows[rowIndex].style.display = "none";
            } else {
                iopGatRows[rowIndex].style.display = ""; // Ensure it's visible if not empty
                iopGatRows[rowIndex].querySelector(`#${rightKey}`).textContent = rightValue || "-";
                iopGatRows[rowIndex].querySelector(`#${rightTimeKey}`).textContent = rightTimeValue || "-";
                iopGatRows[rowIndex].querySelector(`#${leftKey}`).textContent = leftValue || "-";
                iopGatRows[rowIndex].querySelector(`#${leftTimeKey}`).textContent = leftTimeValue || "-";
                visibleIopGatRowCount++;
            }
        });

        // Show or hide the entire table based on row visibility
        iopGatTableElement.style.display = visibleIopGatRowCount > 0 ? "table" : "none";
        iopGatHeading.style.display = visibleIopGatRowCount > 0 ? "block" : "none";
        console.log(visibleIopGatRowCount);

        // Hide the entire section if no details are available
        if (visibleCount === 0 && visibleIopGatRowCount === 0 && visibleAScanRowCount === 0 ) {
            document.getElementById("Pre-Operative-Workup-Section").style.display = "none";
        }


        // Load the diagnosis list from local storage
        const selectedDiagnosis = JSON.parse(localStorage.getItem("selectedDiagnosis")) || [];
        const diagnosisSection = document.querySelector(".show-diagnosis");

        if(selectedDiagnosis.length === 0) {
            // Hide the diagnosis section if no diagnosis is selected
            diagnosisSection.style.display = "none";
        } else {
            // Show the diagnosis section and update the content
            diagnosisSection.style.display = "block";
            diagnosisSection.innerHTML = `
                 <strong>Diagnosis:</strong>
                 <span class="highlight-red">${selectedDiagnosis.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>
            `;
        }


        // Load the Treatment list from local storage
        const selectedMedicationTreatment = JSON.parse(localStorage.getItem("selectedMedicationTreatment")) || [];
        const selectedSurgicalTreatment = JSON.parse(localStorage.getItem("selectedSurgicalTreatment")) || [];
        const treatmentSection = document.querySelector(".show-treatment");

        // Check if there are any treatments selected
        if (selectedMedicationTreatment.length === 0 && selectedSurgicalTreatment.length === 0) {
            treatmentSection.style.display = "none";
        } else {
            treatmentSection.style.display = "block";
    
            let content = `<strong>Treatment :-</strong><br>`;

            if (selectedMedicationTreatment.length > 0) {
                content += `<strong> Medication -</strong> 
                             <span class="highlight-red">${selectedMedicationTreatment.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span><br>`;
            }

            if (selectedSurgicalTreatment.length > 0) {
                content += `<strong>Surgical -</strong>
                            <span class="highlight-red">${selectedSurgicalTreatment.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>`;
            }

            treatmentSection.innerHTML = content;
        }

        
        // Load the Investigation list from local storage
        const selectedInvestigation = JSON.parse(localStorage.getItem("selectedInvestigation")) || [];
        const investigationSection = document.querySelector(".show-investigation");

        if(selectedInvestigation.length === 0) {
            // Hide the investigation section if no investigation is selected
            investigationSection.style.display = "none";
        } else {
            // Show the investigation section and update the content
            investigationSection.style.display = "block";
            investigationSection.innerHTML = `
                <strong>Investigation:</strong>
                <span class="highlight-red">${selectedInvestigation.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>
            `;
        }

        // hide Diagnosis-Treatment-Section if no diagnosis, treatment or investigation is selected
        if(selectedDiagnosis.length === 0 && selectedMedicationTreatment.length === 0 && selectedSurgicalTreatment.length === 0 && selectedInvestigation.length === 0) {
            document.getElementById("Diagnosis-Treatment-Section").style.display = "none";
        }


        // Load the medicines table from local storage
        const medicines = JSON.parse(localStorage.getItem("medicines")) || [];

        const medicinesTable = document.getElementById("Medicines-Table");
        const medicinesTbody = medicinesTable.querySelector("tbody");
        const medicinesHeading = document.getElementById("Medicines-Heading");

        if (medicines.length === 0) {
            // Hide the table if no medicines are selected
            medicinesTable.style.display = "none";
            medicinesHeading.style.display = "none";

        } else {
            // Show the table and update the content
            medicinesTable.style.display = "table";

            // Clear the existing table body
            medicinesTbody.innerHTML = "";

            // Add each medicine as a row in the table
            medicines.forEach((medicine) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${medicine.medicineSelect || "-"}</td>
                    <td>${medicine.medicineDose || "-"}</td>
                    <td>${medicine.medicineQuantity || "-"}</td>
                `;
                medicinesTbody.appendChild(row);
            });
        }

        // Load the advices list from local storage
        const selectedAdvices = JSON.parse(localStorage.getItem("selectedAdvices")) || [];
        const adviceSection = document.querySelector(".show-advice");

        if(selectedAdvices.length === 0) {
            // Hide the advice section if no advice is selected
            adviceSection.style.display = "none";
            document.getElementById("Advice-Section").style.display = "none";
        } else {
            // Show the advice section and update the content
            adviceSection.style.display = "block";
            adviceSection.innerHTML = `
                <strong>Advice:</strong>
                <span class="highlight-red">${selectedAdvices.join(' <span style="font-weight: bold; color: black;">|</span> ')}</span>
            `;
        }
        


      </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

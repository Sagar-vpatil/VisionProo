<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Provisional Slip</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
       
        @page {
            size: A4;
            margin: 0;
        }

        .container {
            max-width: 210mm; /* A4 width */
            min-height: auto; /* A4 height */
            margin: 0 auto;
            padding: 30px;
            position: relative;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 26px;
            font-weight: bold;
            color: #007bff;
        }

        .header p {
            font-size: 16px;
            color: #555;
            font-weight: 600;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #0056b3;
            margin-top: 20px;
            padding-bottom: 5px;
            border-bottom: 2px solid #0056b3;
        }

        .details-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .details-table th,
        .details-table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
            font-size: 16px;
        }

        .details-table th {
            background-color: #f1f1f1;
            color: #333;
            font-weight: 600;
        }

        .details-table td {
            background-color: #f9f9f9;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }

        .btn-print {
            display: block;
            width: 100%;
            max-width: 200px;
            margin: 20px auto;
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s ease;
        }

        .btn-print:hover {
            background-color: #0056b3;
        }

        .rupee-input {
            text-align: right;
            font-size: 16px;
            padding-left: 10px;
        }

        @media print {
            

            .container {
                padding: 15px;
                min-height: auto;
                page-break-after: always;
                box-shadow: none;
            }

            .form-control {
                border: 1px solid #000;
                background: transparent;
                -webkit-print-color-adjust: exact;
            }

            input[type="text"] {
                border: none;
                background: transparent;
                width: 100%;
            }

            .btn-print {
                display: none;
            }

            input, select {
                display: none; /* Hide input and select elements during printing */
            }

            .print-visible {
                display: inline-block !important; /* Show static values during printing */
            }

            .print-hidden {
                display: none !important; /* Hide input and select elements during printing */
            }
            .signature {
                text-align: right;
                font-style: italic;
            }
            .signature::before {
                content: "_______________";
                display: block;
                margin-bottom: 10px;
                margin-top: 100px;
            }
            input[type="date"] {
                appearance: none;
                -webkit-appearance: none;
                -moz-appearance: none;
                border: none;
                padding: 0;
                background: transparent;
                font-family: 'Georgia', serif;
                font-size: 12pt;
                color: #333;
                width: auto;
                line-height: 1.6;
            }

            input[type="date"]::-webkit-calendar-picker-indicator {
                display: none;
            }

            input[type="date"]:before {
                content: attr(value);
            }
            .navbar .buttons button {
                display: none;
            }
        }

        /* Header Section */
        .letterhead {
            border-bottom: 2px solid #004a99;
            padding-bottom: 15px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .hospital-logo {
            width: 160px;
            height: 110px;
        }

        .hospital-info {
            text-align: right;
        }

        .hospital-name {
            font-family: 'Helvetica Neue', sans-serif;
            font-weight: 700;
            color: red;
            font-size: 32px;
            letter-spacing: 1.5px;
        }

        .hospital-address {
            font-size: 18px;
            color: #666;
        }

        /* Input and Select Styling */
        .form-control {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            color: #333;
        }

        .form-control:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

        body, .page {
        margin: 0;
        padding: 0;
       
        box-shadow: none;
    }
/* Define A4 page size and margins explicitly */
@page {
    size: A4;
    margin: 4mm; /* Set a 10mm margin on all sides for the printable area */
}
  /* Navbar Styling */
  .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f8f8;
            padding: 5px 10px;
        }

        .navbar img {
            height: 50px;
            margin-left: 20px;
        }

        .navbar .buttons {
            display: flex;
            gap: 10px;
        }

        .navbar .buttons button {
            padding: 8px 16px;
            font-size: 14px;
            background: #d32f2f;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

    </style>
</head>
<body>

    <nav class="navbar">
        <!-- Logo and Hospital Name -->
        <div style="display: flex; align-items: center;">
           
          
        </div>
           
        </div>
    
        <!-- Image on the Right Side -->
        
    
        <!-- Action Buttons -->
        <div class="buttons" style="margin-bottom: 10px;">
            <button onclick="window.location.href='./main.html';">üè† Home</button>
            <button onclick="printFunction()" >üñ®Ô∏è Print Discharge Card </button>
        </div>
    </nav>
    <div class="container">
        <div class="provisional-slip">
            <!-- Header -->
            <div class="letterhead">
                <div style="margin-left: 120px;">
                    <img src="../assets/images/Ravikalp_Hospital__new_logo-removebg-preview.png" alt="Hospital Logo" class="hospital-logo">
                </div>
                <div class="hospital-info" style="margin-right: 23%;">
                    <div class="hospital-name">‡§∞‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§π‡•â‡§∏‡•ç‡§™‡§ø‡§ü‡§≤</div>
                    <div class="hospital-address" style="margin-right: 0px;">EYE & GENERAL HOSPITAL<br>PHACO & LASER CENTER</div>
                </div>
            </div>

            <!-- Patient Details -->
            <div class="patient-details">
                <div class="section-title">Patient Information</div>
                <table class="details-table">
                    <tr>
                        <th>Patient ID</th>
                        <td  id="patient-id"></td>
                    </tr>
                    <tr>
                        <th>Patient Name</th>
                        <td id="patient-name"></td>
                    </tr>
                    <tr>
                        <th >Age</th>
                        <td id="patient-age "></td>
                    </tr>
                    <tr>
                        <th >Gender</th>
                        <td id="patient-age ">45 </td>
                    </tr>
                    <tr>
                        <th>Contact Number</th>
                        <td>+91 9876543210</td>
                    </tr>
                </table>
            </div>

            <!-- Payment Details -->
            <div class="payment-details">
                <div class="section-title">Payment Information</div>
                <table class="details-table">
                    <tr>
                        <th>Total Charges</th>
                        <td>
                          <input type="text" id="totalCharges" class="form-control rupee-input" value="‚Çπ 0" style="width: 200px;">
                        
                        </td>
                    </tr>
                    <tr>
                        <th>Amount Paid</th>
                        <td>
                            <input type="text" id="amountPaid" class="form-control rupee-input" value="‚Çπ 0" style="width: 200px;">
                        
                        </td>
                    </tr>
                    <tr>
                        <th>Balance Due</th>
                        <td>
                            <input type="text" id="balanceDue" class="form-control rupee-input " value="‚Çπ 0" readonly style="width: 200px;">
               
                        </td>
                    </tr>
                    <tr>
                        <th>Payment Mode</th>
                        <td>
                            <select id="paymentMode" class="form-control print-hidden"  style="width: 200px;">
                                <option value="Cash">Cash</option>
                                <option value="Credit Card">Credit Card</option>
                                <option value="UPI">UPI</option>
                                <option value="Insurance">Insurance</option>
                            </select>
                            <span class="print-visible" id="printPaymentMode" style="display: none; margin-left: 160px;">Cash</span>
                        </td>
                    </tr>
                  
                </table>
            </div>

            <div class="footer" style="color: black;">
                <div class="signature" style="margin-right: 30px;">
                    <p>Dr. Alvin R Rane</p>
                </div>
            </div>

        <!-- Print Button -->
   
    </div>

    <script>
        document.getElementById('totalCharges').addEventListener('input', formatAndCalculate);
        document.getElementById('amountPaid').addEventListener('input', formatAndCalculate);

        function formatAndCalculate(event) {
            let input = event.target;
            let value = input.value.replace(/[^\d]/g, ''); // Remove non-numeric characters
            if (value === "") {
                input.value = "‚Çπ 0"; // Keep ‚Çπ symbol
                return;
            }
            input.value = "‚Çπ " + parseFloat(value).toLocaleString("en-IN");

            // Calculate Balance Due
            let totalCharges = parseFloat(document.getElementById('totalCharges').value.replace(/[^\d]/g, '')) || 0;
            let amountPaid = parseFloat(document.getElementById('amountPaid').value.replace(/[^\d]/g, '')) || 0;
            let balanceDue = totalCharges - amountPaid;

            document.getElementById('balanceDue').value = "‚Çπ " + balanceDue.toLocaleString("en-IN");
        }

        // Update the printed payment mode value when the dropdown changes
        document.getElementById('paymentMode').addEventListener('change', function () {
            document.getElementById('printPaymentMode').textContent = this.value;
        });
    </script>








<script>
    // Set current date
    document.getElementById('currentDate').textContent = new Date().toLocaleDateString();
    // Retrieve the appointment object from localStorage
    const appointment = JSON.parse(window.localStorage.getItem("appointment")) || {};
     // Update the HTML elements with appointment data
    document.getElementById("patient-id").textContent = appointment.id || "N/A";
    document.getElementById("patient-name").textContent = appointment.Name || "N/A";
    document.getElementById("patient-age").textContent = appointment.Age ? appointment.Age + " yrs" : "N/A";
    document.getElementById("patient-gender").textContent = appointment.Gender || "N/A";

    // Function to update print values and trigger print
    function updatePrintValues() {
      document.getElementById('printPaymentAmount').textContent = document.getElementById('paymentAmount').value;
      document.getElementById('printPaymentMode').textContent = document.getElementById('paymentMode').value;

      // Print the acknowledgment slip
      const patientId = "P"+appointment.id;
      // Get todays date with dd-mm-yyyy format
      const today = new Date();
      const date = `${today.getDate().toString().padStart(2, '0')}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getFullYear()}`;
      const Docname = patientId+"_AckSlip" + "_" + date;
      console.log(patientId,date,Docname);

      window.electronAPI.printPage(patientId, date, Docname);
    }
  </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡§∞‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§π‡•â‡§∏‡•ç‡§™‡§ø‡§ü‡§≤</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />
  <!-- BOX ICONS CSS-->
  <link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../frontend/css/main.css" />
  <link rel="stylesheet" href="../assets/css/global.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   <!-- Loader Css -->
   <link rel="stylesheet" href="../frontend/css/loader.css">

  <style>
    h1 {
      text-align: center;
      color: #333;
    }
  .edit-btn {
    padding: 8px 12px;
    font-size: 14px;
    border: none;
    background-color: #007bff;
    color: white;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .edit-btn:hover {
    background-color: #0056b3;
  }
    /* Table Styles */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: #fff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
    }

    th,
    td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #007bff;
      color: #fff;
    }

    tr:hover {
      background-color: #f5f5f5;
    }

    .action-icon {
      font-size: 18px;
      cursor: pointer;
      color: #007bff;
      transition: color 0.3s ease;
    }

    .action-icon:hover {
      color: #0056b3;
    }

    /* Popup Styles */
.popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 500px; /* Adjusted width */
  height: auto;
  max-height: 90vh; /* Adjusted height */
  overflow-y: auto; /* Enable scrolling if content overflows */
  padding: 25px;
  background-color: #fff;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  animation: fadeIn 0.3s ease-in-out;
}

.popup.active {
  display: block;
}

.popup .close-btn {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 24px;
  cursor: pointer;
  color: #333;
  transition: color 0.3s ease;
}

.popup .close-btn:hover {
  color: #007bff;
}

.popup h2 {
  text-align: center;
  margin-bottom: 20px;
  color: #007bff;
  font-size: 24px;
}

.popup label {
  display: block;
  margin-bottom: 8px;
  font-weight: bold;
  color: #555;
}

.popup input,
.popup select {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  font-size: 16px;
  border: 1px solid #ddd;
  border-radius: 5px;
  box-sizing: border-box;
  transition: border-color 0.3s ease;
}

.popup input:focus,
.popup select:focus {
  border-color: #007bff;
  outline: none;
}

.popup input[readonly] {
  background-color: #f9f9f9;
  cursor: not-allowed;
}

.popup button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  color: #fff;
  background-color: #007bff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.popup button:hover {
  background-color: #0056b3;
}

/* Form Grid Layout */
.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

.form-column {
  display: flex;
  flex-direction: column;
}

/* Responsive Design */
@media (max-width: 480px) {
  .popup {
    width: 95%;
    padding: 20px;
  }

  .popup h2 {
    font-size: 20px;
  }

  .popup input,
  .popup select {
    padding: 10px;
    font-size: 14px;
  }

  .popup button {
    padding: 10px;
    font-size: 14px;
  }

  .form-grid {
    grid-template-columns: 1fr; /* Stack columns on small screens */
  }
}

/* Animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translate(-50%, -60%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

    /* Overlay Styles */
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }

    .overlay.active {
      display: block;
    }

    /* Pagination Container */
.pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 20px;
    gap: 10px; /* Space between buttons and text */
}

/* Pagination Buttons */
.pagination-btn {
    background-color: #007bff; /* Blue background */
    color: white; /* White text */
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.pagination-btn:hover {
    background-color: #0056b3; /* Darker blue on hover */
}

.pagination-btn:disabled {
    background-color: #cccccc; /* Gray background for disabled button */
    cursor: not-allowed;
}

/* Pagination Text */
.pagination-text {
    font-size: 16px;
    font-weight: bold;
    color: #333333;
}


/* Container Styling */
.container {
            max-width: 600px;
            width: 100%;
            padding: 10px;
            
        }

        h2 {
            text-align: center;
            color: #0d6efd;
            font-weight: 600;
            margin-bottom: 20px;
        }

        /* Search Box */
        .search-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        /* Dropdown Styling */
        .form-select {
            flex: 1 1 200px;
            border: 2px solid #0d6efd;
            padding: 10px;
            font-size: 16px;
            background: #e9f2ff;
            color: #333;
        }

        .form-select:focus {
            border-color: #0a58ca;
            background: #fff;
            box-shadow: none;
        }

        /* Search Input */
        .input-group {
            flex: 1 1 300px;
        }

        .form-control {
            border: 2px solid #0d6efd;
            padding: 10px;
            font-size: 16px;
            background: #e9f2ff;
            color: #333;
            border-radius: 0;
        }

        .form-control:focus {
            border-color: #0a58ca;
            background: #fff;
            box-shadow: none;
        }

        /* Search Button */
        .input-group-text {
            background: #0d6efd;
            border: 2px solid #0d6efd;
            color: #fff;
            padding: 10px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .input-group-text:hover {
            background: #0a58ca;
            border-color: #0a58ca;
        }

        .input-group-text i {
            font-size: 20px;
        }

        /* Responsive Adjustments */
        @media (max-width: 576px) {
            .search-container {
                flex-direction: column;
            }
        }
  </style>

</head>

<body>
   <!-- Code For Loader -->
   <div id="loader-overlay">
    <div class="loader"></div>
    <p style="color: black;">Loading, please wait...</p>
   </div>
  <!-- Side-Nav -->
  <div class="side-navbar active-nav d-flex justify-content-between flex-wrap flex-column" id="sidebar">
    <ul class="nav flex-column text-white w-90">
      <a href="#" class="nav-link h3 text-white my-2"
        style="text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5); font-weight: bold; display: inline-block; transform: perspective(500px) rotateX(10deg); font-size: 1.5rem;">
        ‡§∞‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ <span
          style="color: #ff0000; text-shadow: 3px 3px 5px rgba(255, 0, 0, 0.5); font-size: 1.5rem;">‡§π‡•â‡§∏‡•ç‡§™‡§ø‡§ü‡§≤</span>
      </a>
      <hr>
      <!-- Navigation Links for Upcoming Appointments and Dashboard History -->
      <li class="nav-item" style="margin-top: 0px;">
        <a href="./view_Appointments.html" class="nav-link text-white w-80 text-left"
          style="font-size: 16px; font-weight: 500; padding: 10px 15px; transition: background-color 0.3s;">
          Upcoming Appointments
        </a>
        <a href="./Patient_Detail.html" class="nav-link text-white w-80 text-left"
          style="font-size: 16px; font-weight: 500; padding: 10px 15px; transition: background-color 0.3s;">
          Update Patient Detail
        </a>
      </li>
    </ul>
  </div>

  <!-- Main Wrapper -->
  <div class="p-1 my-container active-cont">
    <!-- Top Nav -->
    <nav class="navbar top-navbar navbar-light bg-light px-5 d-flex justify-content-between align-items-center"
      style="height: 70px;">
      <!-- Menu Button -->
      <div class="d-flex align-items-center">
        <a class="btn border-0" id="menu-btn"><i class="bx bx-menu" style="background-color: #fff;"></i></a>
      </div>
    </nav>
    
    <h1 style="margin-top: 20px;">Patient Details</h1>
    <div class="container" style="background-color: transparent;">


      <!-- Flexbox Container -->
      <div class="search-container" style="height: 50px;">
          <!-- Dropdown for Filter Option -->
          <select class="form-select" id="select-by">
              <option value="id">Search by ID</option>
              <option value="Name">Search by Name</option>
              <option value="MobileNo">Search by Mobile No</option>
          </select>
          <!-- Search Bar with Icon -->
          <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for patient..." style="height: 55px;" id="search-patient">
              <span class="input-group-text">
                  <i class="bi bi-search"></i> <!-- Bootstrap Search Icon -->
              </span>
          </div>
      </div>
  </div>
    <div class="col-md-6 col-xxl-8" style="display: none;">
      <div class="text-md-end dataTables_filter" id="dataTable_filter"><label
              class="form-label" style="margin-top: 10px;"></label></div>
  </div> 
    <table style="width: 70%;">
        <thead>
            <tr>
                <th>Patient ID</th>
                <th>Name</th>
                <th>Age</th>
                <th>Address</th>
                <th>Mobile Number</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="patientsTableBody">
            <!-- Patient rows will be loaded dynamically here -->
        </tbody>
    </table>
    <!-- Pagination Controls -->
<!-- Pagination Controls -->
<div class="pagination-container">
    <button id="prevPageBtn" class="pagination-btn" disabled>‚¨ÖÔ∏è Previous</button>
    <span id="currentPage" class="pagination-text">Page 1</span>
    <button id="nextPageBtn" class="pagination-btn">Next ‚û°Ô∏è</button>
</div>

<div class="popup" id="popup">
    <span class="close-btn" id="close-btn">&times;</span>
    <h2>Edit Patient Details</h2>
    <form id="patient-form">
      <div class="form-grid">
        <div class="form-column">
          <label for="patient-id">Patient ID</label>
          <input type="text" id="patient-id" placeholder="Patient ID" readonly>

          <label for="dob-input-field">Date of Birth</label>
          <input  type="date" id="dob-input-field" onchange="calculateAge()">
  
          <label for="age">Age</label>
          <input type="number" id="age" placeholder="Age">
        </div>
  
        <div class="form-column">

          <label for="name">Name</label>
          <input type="text" id="name" placeholder="Name">
  
          <label for="gender-select">Gender</label>
          <select  id="gender-select">
            <option value="" disabled selected>Select Gender üîΩ</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
  
          <label for="address">Address</label>
          <input type="text" id="address" placeholder="Address">
        </div>
      </div>
  
      <label for="mobile">Mobile Number</label>
      <input type="tel" id="mobile" placeholder="Mobile Number" maxlength="10">

  
      <button type="button" id="update-btn">Update</button>
    </form>
  </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>


  </div>

  <script>
    // Restrict the date picker to allow only previous dates
    document.addEventListener("DOMContentLoaded", function () {
        const dobInput = document.getElementById("dob-input-field");
        
        // Get today's date in the format YYYY-MM-DD
        const today = new Date().toISOString().split("T")[0];
        
        // Set the max attribute to today's date
        dobInput.setAttribute("max", today);
    });
     function calculateAge() {
                var dobInput = document.getElementById('dob-input-field');
                var ageInput = document.getElementById('age');
                
                var dob = new Date(dobInput.value);
                var today = new Date();
                
                var age = today.getFullYear() - dob.getFullYear();
                var month = today.getMonth() - dob.getMonth();
                
                // If the birthday hasn't occurred yet this year, subtract 1 from the age
                if (month < 0 || (month === 0 && today.getDate() < dob.getDate())) {
                    age--;
                }
                
                // Set the calculated age in the age input field
                ageInput.value = age;
            }
    var menu_btn = document.querySelector("#menu-btn");
    var sidebar = document.querySelector("#sidebar");
    var container = document.querySelector(".my-container");
    menu_btn.addEventListener("click", () => {
      sidebar.classList.toggle("active-nav");
      container.classList.toggle("active-cont");
    });

    let currentRow = null;

    // function openPopup(icon) {
    //   document.getElementById('popup').classList.add('active');
    //   document.getElementById('overlay').classList.add('active');
    // }

    document.getElementById('close-btn').addEventListener('click', () => {
      document.getElementById('popup').classList.remove('active');
      document.getElementById('overlay').classList.remove('active');
    });
  </script>
  <!-- Bootstrap JS -->
  <script src="../frontend/js/script.js"></script>
  <script type="module" src="../backend/edit_Patient.js"></script>
</body>

</html>